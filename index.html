<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sitges Schedule Planner</title>

    <!-- PWA Meta Tags -->
    <meta
      name="description"
      content="Plan your festival schedule with interactive event management"
    />
    <meta name="theme-color" content="#303030ff" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Festival Planner" />

    <!-- Manifest -->
    <link rel="manifest" href="manifest.json" />

    <!-- Favicon and Apple Touch Icons -->
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="icons/Assets.xcassets/AppIcon.appiconset/32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="icons/Assets.xcassets/AppIcon.appiconset/16.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="icons/Assets.xcassets/AppIcon.appiconset/180.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="icons/Assets.xcassets/AppIcon.appiconset/152.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="icons/Assets.xcassets/AppIcon.appiconset/144.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="icons/Assets.xcassets/AppIcon.appiconset/120.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="icons/Assets.xcassets/AppIcon.appiconset/114.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="icons/Assets.xcassets/AppIcon.appiconset/76.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="icons/Assets.xcassets/AppIcon.appiconset/72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="icons/Assets.xcassets/AppIcon.appiconset/60.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="icons/Assets.xcassets/AppIcon.appiconset/57.png"
    />

    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <div class="container">
      <h1>🎬 Festival Schedule Planner</h1>

      <div
        id="installPrompt"
        class="controls-section"
        style="display: none; background: #d4edda; border-left-color: #28a745"
      >
        <div class="controls-row">
          <span
            >📱 <strong>Install App:</strong> Add this planner to your home
            screen for offline access!</span
          >
          <button onclick="installApp()" style="background: #28a745">
            📲 Install
          </button>
          <button
            onclick="dismissInstallPrompt()"
            class="secondary"
            style="font-size: 12px; padding: 4px 8px"
          >
            ✕
          </button>
        </div>
      </div>

      <div class="controls-section collapsible">
        <div class="controls-header" onclick="toggleSection('planning-tools')">
          <h3 style="margin: 0; color: #303030ff">📋 Planning Tools</h3>
          <span class="collapse-icon" id="planning-tools-icon">
            <svg
              viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg"
              fill="#000000"
            >
              <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
              <g
                id="SVGRepo_tracerCarrier"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></g>
              <g id="SVGRepo_iconCarrier">
                <path
                  fill="#5C5F62"
                  d="M13.098 8H6.902c-.751 0-1.172.754-.708 1.268L9.292 12.7c.36.399 1.055.399 1.416 0l3.098-3.433C14.27 8.754 13.849 8 13.098 8Z"
                ></path>
              </g>
            </svg>
          </span>
        </div>
        <div class="collapsible-content" id="planning-tools-content">
          <div class="controls-row">
            <div class="planning-controls">
              <button onclick="showAllEvents()">👁️ Show All</button>
              <button onclick="showOnlyInterested()" class="secondary">
                ⭐ Show Interested
              </button>
              <button onclick="showOnlySelected()" class="secondary">
                ✅ Show Selected
              </button>
              <div style="display: inline-flex; gap: 5px">
                <button onclick="exportMyPlan()">📤 Export Plan</button>
                <button onclick="exportToCalendar()" class="secondary">
                  📅 Export Calendar
                </button>
              </div>
              <button onclick="importMyPlan()" class="secondary">
                📥 Import Plan
              </button>
              <button
                onclick="toggleListView()"
                class="secondary"
                id="listViewBtn"
              >
                📋 List View
              </button>
            </div>
          </div>
          <div class="controls-row">
            <span
              >🎯 <strong>Planning Mode:</strong> Click events to mark as
              interested (⭐) or hide (❌)</span
            >
            <div class="hidden-count" id="hiddenCount">Hidden: 0</div>
            <div
              class="hidden-count"
              id="interestedCount"
              style="background: #fff3cd; color: #856404"
            >
              Interested: 0
            </div>
            <div
              class="hidden-count"
              id="selectedCount"
              style="background: #d4edda; color: #155724"
            >
              Selected: 0
            </div>
            <button
              onclick="unhideAllEvents()"
              class="secondary"
              style="font-size: 12px; padding: 4px 8px"
            >
              🔄 Unhide All
            </button>
          </div>
          <div class="controls-row">
            <div class="legend">
              <div class="legend-item">
                <div
                  class="legend-color"
                  style="
                    background: linear-gradient(
                      135deg,
                      rgb(244, 70, 117),
                      rgb(231, 76, 96)
                    );
                  "
                ></div>
                <span>Movie</span>
              </div>
              <div class="legend-item">
                <div
                  class="legend-color"
                  style="
                    background: linear-gradient(
                      135deg,
                      rgb(170, 40, 75),
                      rgb(135, 28, 42)
                    );
                  "
                ></div>
                <span>Multiple Movies</span>
              </div>
              <div class="legend-item">
                <div
                  class="legend-color"
                  style="
                    background: linear-gradient(135deg, #ffc107, #ffb300);
                    border: 2px solid #fd7e14;
                  "
                ></div>
                <span>⭐ Interested</span>
              </div>
              <div class="legend-item">
                <div
                  class="legend-color"
                  style="
                    background: linear-gradient(135deg, #28a745, #20c997);
                    border: 2px solid #17a2b8;
                  "
                ></div>
                <span>✅ Selected</span>
              </div>
              <div class="legend-item">
                <div class="legend-color" style="background: #6c757d"></div>
                <span>❌ Hidden</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="loading" class="loading">📡 Loading festival schedule...</div>

      <div id="error" class="error" style="display: none"></div>

      <div id="stats"></div>
      <div id="calendar"></div>
      <div class="tooltip" id="tooltip"></div>

      <!-- Hidden file input for import -->
      <input
        type="file"
        id="importFileInput"
        accept=".txt,.json"
        style="display: none"
        onchange="handleImportFile(event)"
      />
    </div>

    <script src="js/planner.js"></script>
  </body>
</html>
